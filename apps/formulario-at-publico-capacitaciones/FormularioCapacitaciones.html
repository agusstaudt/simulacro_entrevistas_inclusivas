<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario de verificaci√≥n de registro</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Flatpickr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
  <style>
    /* fuente de letra */
    body {
      font-family: 'Montserrat', sans-serif;
    }
    #modalProgreso {
      font-family: 'Montserrat', sans-serif;
    }

    /* Estilo para campos de opciones */
    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      box-shadow: 0 0 0 2px #059669; /* Tailwind emerald-600 */
      border-color: #059669;
    }
      /* Estilos base para todos los campos */
    input,
    select {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #d1d5db; /* gray-300 */
      border-radius: 0.375rem;    /* Tailwind rounded */
      background-color: white;
      color: #1f2937;             /* gray-800 */
      font-size: 1rem;
      line-height: 1.5rem;
      height: 2.5rem;             /* Igual altura */
      appearance: none;
    }

    /* Alineaci√≥n vertical y estilo de flecha */
    select {
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 10 6' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L5 5L9 1' stroke='%236B7280' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 1rem;
      padding-right: 2rem; /* espacio para flecha */
    }

    /* Focus para inputs y selects */
    input:focus,
    select:focus {
      outline: none;
      border-color: #34d399;     /* emerald-400 */
      box-shadow: 0 0 0 2px #34d399;
    }

    /* barra de progreso emergente de boton enviar */
    .RadialProgress {
      --progress: 0%;
      background: conic-gradient(#16a34a var(--progress), #e5e7eb var(--progress));
    }

  </style>
  <script>

    function verificarPersona() {
      let cuil = document.getElementById("cuil").value.trim();
      let nombre = document.getElementById("nombre").value.trim();
      let apellido = document.getElementById("apellido").value.trim();
      let dia = document.getElementById("dia").value.trim();
      let mes = document.getElementById("mes").value.trim();
      let anio = document.getElementById("anio").value.trim();

      if (!cuil || !nombre || !apellido || !dia || !mes || !anio) {
        alert("Por favor, complete todos los campos.");
        return;
      }

      // Verificar si los campos tienen el formato correcto
      if (cuil.length !== 11 || dia.length !== 2 || mes.length !== 2 || anio.length !== 4) {
        alert("Algunos campos tienen un formato incorrecto. Revise las advertencias en rojo.");
        return;
      }
      
      let mensajeProgreso = document.getElementById("mensajeProgreso");
      mensajeProgreso.innerText = `Buscando CUIL ${cuil}...`;
      document.getElementById("progreso").classList.remove("hidden");
      document.getElementById("mensajeProgreso").classList.remove("hidden");
      document.getElementById("barraProgreso").style.width = "0%";

      google.script.run
        .withSuccessHandler(function(response) {
          document.getElementById("barraProgreso").style.width = "100%";
          document.getElementById("resultado").innerText = response;
          // Cambiar el color del texto dependiendo del valor de response
          if (response === "La persona se encuentra registrada") {
            document.getElementById("resultado").style.color = "green"; // Color verde
          } else {
            document.getElementById("resultado").style.color = "red"; // Color rojo
          }
          // Ocultar la barra de progreso y el mensaje una vez que se obtenga la respuesta
          document.getElementById("mensajeProgreso").classList.add("hidden");
          document.getElementById("progreso").classList.add("hidden");
        })
        .withFailureHandler(function(error) {
          document.getElementById("mensajeProgreso").innerText = "Error durante la b√∫squeda.";
        })
        .buscarPersona(cuil, nombre, apellido, dia, mes, anio);

        let progress = 0;
        let interval = setInterval(function() {
          progress += 10;
          document.getElementById("barraProgreso").style.width = progress + "%";
          if (progress >= 100) {
            clearInterval(interval);
          }
        }, 500);
      }

  function limpiarFormulario() {
    const formulario = document.querySelector(".z-10"); // contenedor del formulario
    const inputs = formulario.querySelectorAll("input, select, textarea");

    // Limpiar valores de campos
    inputs.forEach(input => {
      if (input.tagName === "SELECT") {
        input.selectedIndex = 0;
      } else {
        input.value = '';
      }
    });

    // Limpiar mensajes y advertencias visibles
    const elementosOcultables = [
      "progreso", "mensajeProgreso", "resultado", "cuilWarning",
      "diaWarning", "mesWarning", "anioWarning",
      "diaWarningbr", "mesWarningbr", "erroresFormulario",
      "mensajeNoEncontrado"
    ];

    elementosOcultables.forEach(id => {
      const el = document.getElementById(id);
      if (el) {
        if (el.tagName === "SPAN" || el.tagName === "DIV" || el.tagName === "P") {
          el.classList.add("hidden");
          if (el.id === "resultado" || el.id === "erroresFormulario") {
            el.innerText = '';
          }
        }
      }
    });

    // Reset barra de progreso si existe
    const barraProgreso = document.getElementById("barraProgreso");
    if (barraProgreso) barraProgreso.style.width = "0%";

    const barraCUIL = document.getElementById("barraCUIL");
    if (barraCUIL) barraCUIL.style.width = "0%";
  }

  function validarCUIL(input) {
    input.value = input.value.replace(/\D/g, '');
  }

  function verificarCUIL(input) {
    const warning = document.getElementById("cuilWarning");
    input.value.length !== 11 ? warning.classList.remove("hidden") : warning.classList.add("hidden");
  }

  function validarTexto(input) {
    input.value = input.value.replace(/[^a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë\s]/g, '');
  }

  // nuevo
  function cargarDatosDesdeCUIL() {
    const cuil = document.getElementById("cuil").value.trim();

    // Reset
    document.getElementById("mensajeNoEncontrado").classList.add("hidden");
    document.getElementById("barraCUIL").style.width = "0%";

    if (!cuil || cuil.length !== 11) return;

    // Mostrar progreso
    const progresoCUIL = document.getElementById("progresoCUIL");
    const barraCUIL = document.getElementById("barraCUIL");
    progresoCUIL.classList.remove("hidden");

    let progress = 0;
    const interval = setInterval(() => {
      progress += 5;
      barraCUIL.style.width = `${progress}%`;
      if (progress >= 95) clearInterval(interval);
    }, 100);

    google.script.run
      .withSuccessHandler(data => {
        clearInterval(interval);

        barraCUIL.style.width = "100%";

        // Esperar un poco y ocultar progreso
        setTimeout(() => {
          progresoCUIL.classList.add("hidden");
          barraCUIL.style.width = "0%";
        }, 400);

        if (data) {
          document.getElementById("nombre").value = data.nombre || '';
          document.getElementById("apellido").value = data.apellido || '';
          document.getElementById("fechaNacimiento").value = data.fechaNacimiento || '';
          document.getElementById("telefono").value = data.telefono || '';
          document.getElementById("correo").value = data.correo || '';
        } else {
          limpiarCamposCUIL();
          // Mostrar mensaje solo despu√©s de ocultar la barra
          setTimeout(() => {
            document.getElementById("mensajeNoEncontrado").classList.remove("hidden");
          }, 400);
        }
      })
      .withFailureHandler(error => {
        clearInterval(interval);
        limpiarCamposCUIL();
        progresoCUIL.classList.add("hidden");
        barraCUIL.style.width = "0%";
        document.getElementById("mensajeNoEncontrado").classList.remove("hidden");
      })
      .obtenerDatosPorCUIL(cuil);
  }

  function limpiarCamposCUIL() {
    document.getElementById("nombre").value = '';
    document.getElementById("apellido").value = '';
    document.getElementById("fechaNacimiento").value = '';
    document.getElementById("telefono").value = '';
    document.getElementById("correo").value = '';
  }
  document.addEventListener("DOMContentLoaded", function() {
    document.getElementById("cuil").addEventListener("blur", cargarDatosDesdeCUIL);
  });

  window.onload = function() {
    google.script.run.withSuccessHandler(function(cursos) {
      const select = document.getElementById("nombreCurso");
      select.innerHTML = ""; // Limpiar opciones previas

      // ‚úÖ Opci√≥n por defecto vac√≠a
      const opcionDefault = document.createElement("option");
      opcionDefault.value = "";
      opcionDefault.textContent = "Elegir un curso";
      select.appendChild(opcionDefault);

      cursos.forEach(function(curso) {
        const option = document.createElement("option");
        option.value = curso;
        option.textContent = curso;
        select.appendChild(option);
      });
    }).obtenerCursos();
  };

  function validarYEnviar() {
    const formulario = document.querySelector(".z-10");
    const inputs = formulario.querySelectorAll("input, select, textarea");

    const datos = {};
    const errores = [];

    inputs.forEach(input => {
      const id = input.id;
      const label = formulario.querySelector(`label[for="${id}"]`);
      const labelTexto = label ? label.textContent.replace(":", "").trim() : id;
      const valor = input.value.trim();

      if (!valor || (input.tagName === "SELECT" && valor === "")) {
        errores.push(`El campo "${labelTexto}" es obligatorio.`);
      } else {
        datos[id] = valor;
      }
    });

    const erroresEl = document.getElementById("erroresFormulario");
    if (errores.length > 0) {
      erroresEl.innerHTML = errores.join("<br>");
      erroresEl.classList.remove("hidden");
      return;
    }

    erroresEl.classList.add("hidden");

    mostrarModal();
    setProgreso(25, "Verificando duplicados...");

    // Verificamos primero si los datos ya existen
    google.script.run
      .withSuccessHandler(function (existe) {
        if (existe) {
          setProgreso(100, "‚ö†Ô∏è La persona ya fue inscripto a un curso este mes.");
          setTimeout(cerrarModal, 2500);
          return;
        }

        // Si no existen, ahora verificamos el cupo
        const nombreCurso = datos["nombreCurso"];
        const comision = datos["comision"];
        const fechaInicio = datos["fechaInicio"];
        const cupoMaximo = 2;

        setProgreso(50, "Verificando cupo del curso...");

        // ... dentro de google.script.run.withSuccessHandler(...)
        google.script.run
          .withSuccessHandler(function (respuesta) {
            if (respuesta.error === -1) {
              setProgreso(100, "‚ùå No se encontr√≥ la codificaci√≥n o el cupo del curso.");
              setTimeout(cerrarModal, 2500);
              return;
            }

            if (respuesta.error === -2) {
              setProgreso(100, "‚ùå Error interno al verificar el curso.");
              setTimeout(cerrarModal, 2500);
              return;
            }

            const cantidadActual = respuesta.cantidad;
            const cupoMaximo = parseInt(respuesta.cupoMaximo);

            if (cantidadActual >= cupoMaximo) {
              setProgreso(100, "‚ö†Ô∏è No se pueden registrar m√°s personas. Cupo completo.");
              setTimeout(cerrarModal, 2500);
              return;
            }

            const esUltimoLugar = cantidadActual === (cupoMaximo - 1);

            setProgreso(70, "Guardando datos...");

            google.script.run.guardarEnHojaCurso(datos);

            google.script.run
              .withSuccessHandler(() => {
                const mensajeFinal = esUltimoLugar
                  ? "‚úÖ Datos enviados. üü° ¬°Se complet√≥ el cupo del curso!"
                  : "‚úÖ Datos enviados correctamente.";

                setProgreso(100, mensajeFinal);
                limpiarFormulario();
                setTimeout(cerrarModal, 2500);
              })
              .guardarEnDatosCursos(datos);
          })
          .withFailureHandler(function () {
            setProgreso(100, "‚ùå Error al verificar el cupo.");
            setTimeout(cerrarModal, 2500);
          })
          .obtenerCantidadInscriptos(nombreCurso, comision, fechaInicio); 
      })
      .withFailureHandler(function () {
        setProgreso(100, "‚ùå Error al verificar duplicados.");
        setTimeout(cerrarModal, 2500);
      })
      .datosYaExisten(datos);
  }

  // barra de progreso boton enviar
  function setProgreso(valor, texto = null) {
    const percent = `${valor}%`;
    const offset = 282.6 - (valor / 100) * 282.6;

    // Actualizar donut
    const circle = document.getElementById("progresoDonut");
    if (circle) {
      circle.style.strokeDashoffset = offset;
    }

    // Actualizar texto
    document.getElementById("progresoTexto").textContent = percent;
    if (texto) document.getElementById("estadoMensaje").textContent = texto;
  }

  function mostrarModal() {
    document.getElementById('modalProgreso').classList.remove('hidden');
    setProgreso(0, "Verificando duplicados...");
  }

  function cerrarModal() {
    document.getElementById('modalProgreso').classList.add('hidden');
  }
  
  function ocultarProgreso() {
    document.getElementById("modalProgreso").classList.add("hidden");
  }

  // para turnos, comision y demas datos del curso
  function actualizarTurnos() {
    const nombreCurso = document.getElementById("nombreCurso").value;
    const selectTurno = document.getElementById("turno");
    const selectComision = document.getElementById("comision");

    // Limpiar turnos y comisiones
    selectTurno.innerHTML = '<option value="">Eleg√≠ un turno</option>';
    selectComision.innerHTML = '<option value="">Eleg√≠ una comisi√≥n</option>';
    selectTurno.disabled = true;
    selectComision.disabled = true;

    if (!nombreCurso) return;

    // Turnos
    google.script.run.withSuccessHandler(function (turnos) {
      turnos.forEach(turno => {
        const option = document.createElement("option");
        option.value = turno.toLowerCase();
        option.textContent = turno;
        selectTurno.appendChild(option);
      });
      selectTurno.disabled = turnos.length === 0;
    }).obtenerTurnosPorCurso(nombreCurso);

    // Comisiones
    google.script.run.withSuccessHandler(function (comisiones) {
      comisiones.forEach(com => {
        const option = document.createElement("option");
        option.value = com;
        option.textContent = com;
        selectComision.appendChild(option);
      });
      selectComision.disabled = comisiones.length === 0;
    }).obtenerComisionesPorCurso(nombreCurso);

    // Otros campos
    google.script.run.withSuccessHandler(function (datos) {
      actualizarOpcionesCampo("institucion", datos.institucion);
      actualizarOpcionesCampo("duracion", datos.duracion);
      actualizarOpcionesCampo("encuentros", datos.encuentros);
      actualizarOpcionesCampo("horasClase", datos.horasClase);
      actualizarOpcionesCampo("fechaInicio", datos.fechaInicio, true);
    }).obtenerDatosCurso(nombreCurso);
  }

  // helper para actualizar un campo con opciones
  function actualizarOpcionesCampo(idCampo, valores, esFecha = false) {
    const campo = document.getElementById(idCampo);
    if (!campo) return;

    const contenedor = campo.parentElement;

    if (esFecha) {
      const yaEsSelect = campo.tagName === "SELECT";
      const yaEsInput = campo.tagName === "INPUT";

      // Limpiar calendario anterior si lo hay (flatpickr lo deja enganchado)
      if (yaEsInput && campo._flatpickr) {
        campo._flatpickr.destroy();
      }

      // Caso: hay fechas disponibles ‚Üí mostrar <select>
      if (valores.length > 0) {
        // si ya es select, actualizamos
        if (yaEsSelect) {
          campo.innerHTML = "";
        } else {
          // eliminar input anterior y crear select nuevo
          const nuevoSelect = document.createElement("select");
          nuevoSelect.id = idCampo;
          nuevoSelect.className = campo.className;
          campo.replaceWith(nuevoSelect);
        }

        const campoActual = document.getElementById(idCampo);
        const defaultOpt = document.createElement("option");
        defaultOpt.value = "";
        defaultOpt.textContent = "Eleg√≠ una fecha";
        campoActual.appendChild(defaultOpt);

        valores.forEach(valor => {
          const opt = document.createElement("option");
          opt.value = formatearFecha(valor);
          opt.textContent = formatearFecha(valor);
          campoActual.appendChild(opt);
        });

      } else {
        // Caso: sin fechas ‚Üí mostrar input con calendario
        if (yaEsInput) {
          campo.value = "";
        } else {
          const nuevoInput = document.createElement("input");
          nuevoInput.id = idCampo;
          nuevoInput.type = "text";
          nuevoInput.className = campo.className;
          nuevoInput.placeholder = "Seleccione una fecha";
          campo.replaceWith(nuevoInput);
        }

        const campoNuevo = document.getElementById(idCampo);

        flatpickr(campoNuevo, {
          locale: "es",
          dateFormat: "Y-m-d",
          altInput: true,
          altFormat: "d/m/Y",
          altInputClass: "w-full p-2 border rounded mb-2 bg-white text-black"
        });
      }

      return; // ya procesamos el caso de fecha
    }

    // Para campos normales (no fecha)
    if (valores.length > 1) {
      if (campo.tagName !== "SELECT") {
        const nuevoSelect = document.createElement("select");
        nuevoSelect.id = idCampo;
        nuevoSelect.className = campo.className;
        campo.replaceWith(nuevoSelect);
      }

      const campoActual = document.getElementById(idCampo);
      campoActual.innerHTML = "";

      const defaultOpt = document.createElement("option");
      defaultOpt.value = "";
      defaultOpt.textContent = "Eleg√≠ una opci√≥n";
      campoActual.appendChild(defaultOpt);

      valores.forEach(valor => {
        const opt = document.createElement("option");
        opt.value = valor;
        opt.textContent = valor;
        campoActual.appendChild(opt);
      });
    } else if (valores.length === 1) {
      if (campo.tagName !== "INPUT") {
        const nuevoInput = document.createElement("input");
        nuevoInput.type = "text";
        nuevoInput.id = idCampo;
        nuevoInput.className = campo.className;
        campo.replaceWith(nuevoInput);
      }

      document.getElementById(idCampo).value = valores[0];
    }
  }

  // ayuda para fechas con formato dd/mm/yyyy ‚Üí yyyy-mm-dd
  function formatearFecha(fecha) {
    const partes = fecha.trim().split("/");
    if (partes.length === 3) {
      return `${partes[2]}-${partes[1].padStart(2, '0')}-${partes[0].padStart(2, '0')}`;
    }
    return fecha;
  }

  // restringir en campos num√©ricos
  function validarDecimalONumero(input) {
    // Eliminar caracteres que no sean n√∫meros ni punto
    input.value = input.value.replace(/[^0-9.]/g, '');

    // Solo permitir un punto
    const partes = input.value.split('.');
    if (partes.length > 2) {
      input.value = partes[0] + '.' + partes.slice(1).join('');
    }
  }
  </script>
</head>
<body class="bg-gray-100 flex flex-col min-h-screen">
  <header class="bg-white text-black w-full py-2 px-4 text-lg md:text-xl font-bold flex justify-start items-center shadow">
    <img 
      src="https://lh3.googleusercontent.com/d/13bYiNUPlw2Oe65tZhbB_iGAa826qb3wX"
      class="ml-2 max-h-20 sm:max-h-24 md:max-h-28 w-auto object-contain">
  </header>
  <div class="relative flex-grow flex items-center justify-center py-8 md:py-12">
    <!-- Fondo con opacidad -->
    <div class="absolute inset-0 bg-[url(https://lh3.googleusercontent.com/d/186-gUIHNmO1KKIGKDNIXJuHfMvny8JRG)] bg-cover bg-center brightness-90"></div>

  <!-- Contenido del formulario -->
  <div class="relative z-10 w-full max-w-5xl mx-auto rounded-3x1 overflow-hidden shadow-lg grid grid-cols-1 md:grid-cols-2 px-4 sm:px-6 lg:px-8">
    <!-- Columna izquierda -->
    <div class="bg-white p-8 space-y-3">
      <h2 class="text-xl font-bold text-green-700 mb-4">Informaci√≥n del curso</h2>

      <label for="nombreCurso" class="block font-medium">Nombre del curso:</label>
      <select id="nombreCurso" class="w-full p-2 border border-gray-300 rounded mb-2 bg-white text-gray-800" onchange="actualizarTurnos()">
        <option value="">Cargando cursos...</option>
      </select>

      <label for="comision" class="block font-medium">Comisi√≥n:</label>
      <select id="comision" class="w-full p-2 border rounded mb-2" disabled>
        <option value="">Eleg√≠ una comisi√≥n</option>
      </select>

    <!-- Selector de turno din√°mico -->
    <label for="turno" class="block font-medium">Turno:</label>
    <select id="turno" class="w-full p-2 border border-gray-300 rounded mb-2 bg-white text-gray-800" disabled>
      <option value="">Eleg√≠ un turno</option>
    </select>
      
      <label for="institucion" class="block font-medium">Instituci√≥n que dicta el curso:</label>
      <input type="text" id="institucion" class="w-full p-2 border rounded mb-2">

      <label for="duracion" oninput="validarDecimalONumero(this)" class="block font-medium">Cantidad total de encuentros:</label>
      <input type="number" id="duracion" class="w-full p-2 border rounded mb-2">

      <label for="encuentros" oninput="validarDecimalONumero(this)" class="block font-medium">Cantidad de encuentros por semana:</label>
      <input type="number" id="encuentros" class="w-full p-2 border rounded mb-2">

      <label for="horasClase" oninput="validarDecimalONumero(this)" class="block font-medium">Duraci√≥n de la clase (en horas):</label>
      <input type="number" id="horasClase" class="w-full p-2 border rounded mb-2">

      <div id="grupo-fechaInicio" class="mb-2">
        <label for="fechaInicio" class="block font-medium">Fecha de inicio:</label>
        <input type="text" id="fechaInicio" class="w-full p-2 border rounded" placeholder="Seleccione una fecha">
      </div>
    </div>

    <!-- Columna derecha -->
    <div class="bg-emerald-600 text-white p-8 relative space-y-3">
      <h2 class="text-xl font-bold mb-4">Datos personales</h2>

      <label for="cuil" class="block font-medium">CUIL:</label>
      <input type="text" id="cuil" maxlength="11" oninput="validarCUIL(this)" onblur="verificarCUIL(this)" 
            class="w-full p-2 border rounded mb-2 text-black" placeholder="Sin puntos ni guiones">
      <span id="cuilWarning" class="bg-red-100 text-red-800 font-semibold text-sm hidden">
        ‚ö†Ô∏è El CUIL debe tener 11 d√≠gitos.
      </span>
      <span id="mensajeNoEncontrado" class="bg-red-100 text-red-800 font-semibold text-sm hidden mt-1"> ‚ö†Ô∏è No se encontraron datos con este CUIL.</span>

      <div id="progresoCUIL" class="hidden mt-2">
        <div class="w-full bg-gray-200 rounded-full h-2">
          <div id="barraCUIL" class="h-2 bg-green-400 rounded-full" style="width: 0%;">
          </div>
        </div>
        <p class="text-emerald-800 font-semibold text-sm mt-2 mb-4"> Buscando datos del CUIL... </p>
      </div>

      <label for="nombre" class="block font-medium mt-2">Nombre:</label>
      <input type="text" id="nombre" class="w-full p-2 border rounded mb-2 text-black" placeholder="Nombre" oninput="validarTexto(this)">

      <label for="apellido" class="block font-medium">Apellido:</label>
      <input type="text" id="apellido" class="w-full p-2 border rounded mb-2 text-black" placeholder="Apellido" oninput="validarTexto(this)">

      <label for="fechaNacimiento" class="block font-medium">Fecha de nacimiento:</label>
      <input type="text" id="fechaNacimiento" class="w-full p-2 border rounded mb-2 text-black" placeholder="YYYY-MM-DD">

      <label for="telefono" class="block font-medium">Tel√©fono:</label>
      <input type="text" id="telefono" class="w-full p-2 border rounded mb-2 text-black">

      <label for="correo" class="block font-medium">Correo electr√≥nico:</label>
      <input type="email" id="correo" class="w-full p-2 border rounded mb-4 text-black">

      <label for="metodoInscripcion" class="block font-medium">M√©todo de inscripci√≥n:</label>
      <select id="metodoInscripcion" class="w-full p-2 border border-gray-300 rounded mb-2 bg-white text-gray-800">
        <option value="">M√©todo de inscripci√≥n</option>
        <option value="presencial">Presencial</option>
        <option value="whatsapp">WhatsApp</option>
      </select>

      <!-- Botones -->
      <div class="flex justify-between">
        <button onclick="validarYEnviar()" class="bg-white text-black font-bold px-4 py-2 rounded hover:bg-green-100">Enviar</button>
        <button onclick="limpiarFormulario()" class="bg-gray-300 text-black font-bold px-4 py-2 rounded hover:bg-green-200">Limpiar</button>
        
      </div>

      <!-- Modal con progreso para el boton enviar (ventana emergente) -->
      <div id="modalProgreso" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden z-50">
        <div class="bg-white rounded-lg p-6 shadow-xl text-center w-[90%] max-w-md">
          <h2 class="text-lg font-semibold text-gray-800 mb-4">Procesando datos...</h2>

          <!-- Donut SVG -->
          <div class="relative w-[120px] h-[120px] mx-auto">
            <svg class="w-full h-full transform -rotate-90" viewBox="0 0 100 100">
              <!-- Fondo gris -->
              <circle cx="50" cy="50" r="45" stroke="#e5e7eb" stroke-width="10" fill="none" />
              <!-- C√≠rculo de progreso -->
              <circle id="progresoDonut" cx="50" cy="50" r="45" stroke="#16a34a" stroke-width="10" fill="none"
                stroke-linecap="round"
                stroke-dasharray="282.6"
                stroke-dashoffset="282.6"
              />
            </svg>
            <!-- Porcentaje en el centro -->
            <div id="progresoTexto" class="absolute inset-0 flex items-center justify-center text-green-600 font-bold text-xl">
              0%
            </div>
          </div>

          <p id="estadoMensaje" class="mt-4 text-gray-600">Verificando duplicados...</p>
        </div>
      </div>
    </div>
      <!-- Errores -->
      <p id="erroresFormulario" class="bg-red-100 text-red-800 text-sm font-semibold p-3 rounded hidden mt-4 shadow">
        <!-- Mensaje de error se inyecta aqu√≠ -->
      </p>
    </div>
  </div>

</div>

</body>
</html>
